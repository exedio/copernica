<?xml version="1.0"?>

<project name="cope" default="compile" basedir=".">

	<target name="lib.compile">
		<mkdir dir="lib/build/classes" />
		<javac srcdir= "lib/src"
				destdir="lib/build/classes"
				deprecation="on"
				debug="on"
				optimize="off">
			<include name="com/**" />
		</javac>
	</target>
	
	<target name="instrument.compile" depends="lib.compile">
		<mkdir dir="instrument/build/classes" />
		<javac srcdir= "instrument/src"
				destdir="instrument/build/classes"
				deprecation="on"
				debug="on"
				optimize="off">
			<include name="com/**" />
			<classpath>
				<pathelement location="lib/build/classes" />
			</classpath>
		</javac>
	</target>
	
	<target name="compile" depends="lib.compile, instrument.compile" />
	
	<target name="lib.clean">
		<delete dir="lib/build" />
	</target>

	<target name="instrument.clean">
		<delete dir="instrument/build" />
	</target>

	<target name="clean" depends="lib.clean, instrument.clean" />
	
	
	<target name="api" description="Builds Javadoc API documentation.">

		<delete dir="lib/api" />
		<mkdir  dir="lib/api" />

		<javadoc
				sourcepath="lib/src"
				destdir="lib/api"
				maxmemory="60m"
				private="on"
				author="on"
				windowtitle="COPE (Cooles Persistenzframework)"
				doctitle=   "COPE (Cooles Persistenzframework)"
				header="header text"
				footer="footer text"
				splitindex="on"
				bottom='bottom text'
			>
			<package name="com.*" />
		</javadoc>
	</target>

</project>